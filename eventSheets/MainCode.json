{
	"name": "MainCode",
	"events": [
		{
			"eventType": "variable",
			"name": "player_state",
			"type": "string",
			"initialValue": "\"idle\"",
			"comment": "The what player do",
			"isStatic": false,
			"isConstant": false,
			"sid": 238381010222125
		},
		{
			"eventType": "variable",
			"name": "player_direction",
			"type": "string",
			"initialValue": "\"down\"",
			"comment": "The direction of player motion",
			"isStatic": false,
			"isConstant": false,
			"sid": 230927961875746
		},
		{
			"eventType": "variable",
			"name": "is_roll_",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 236033571585766
		},
		{
			"eventType": "comment",
			"text": "Made by Valov Games Studios \n\nCraft-like stuff programmer - Megahorosh\nSouls-like stuff programmer - Saltein"
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "LevelDesign",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 103117514789970
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Move the camera away from the player, for a cinematographic start."
						},
						{
							"id": "look-at-position",
							"objectClass": "3DCamera",
							"sid": 434059542194488,
							"parameters": {
								"cam-x": "PlayerCollision.X",
								"cam-y": "PlayerCollision.Y + 256",
								"cam-z": "64",
								"look-x": "PlayerCollision.X",
								"look-y": "PlayerCollision.Y",
								"look-z": "8",
								"up-x": "0",
								"up-y": "0",
								"up-z": "1"
							}
						},
						{
							"type": "comment",
							"text": "Reduce the height of all billboards, so their textures are perfectly centered."
						},
						{
							"id": "set-height",
							"objectClass": "PlayerBillboard",
							"sid": 480503310319819,
							"parameters": {
								"height": "0"
							}
						},
						{
							"id": "set-height",
							"objectClass": "DecorationBillboard",
							"sid": 533554932990509,
							"parameters": {
								"height": "0"
							}
						},
						{
							"id": "add-child",
							"objectClass": "PlayerCollision",
							"sid": 664911426117376,
							"parameters": {
								"child": "Player_shadow",
								"transform-x": true,
								"transform-y": true,
								"transform-w": true,
								"transform-h": true,
								"transform-a": true,
								"transform-o": false,
								"transform-z-elevation": true,
								"transform-visibility": false,
								"destroy-with-parent": false
							}
						},
						{
							"id": "set-position",
							"objectClass": "Player_shadow",
							"sid": 293901252680803,
							"parameters": {
								"x": "PlayerCollision.x",
								"y": "PlayerCollision.Y"
							}
						},
						{
							"id": "set-face-object",
							"objectClass": "Player_shadow",
							"sid": 430101203442650,
							"parameters": {
								"face": "back",
								"object": "PlayerTexture"
							}
						},
						{
							"id": "set-angle",
							"objectClass": "Player_shadow",
							"sid": 282588724585556,
							"parameters": {
								"angle": "-15"
							}
						},
						{
							"id": "set-position",
							"objectClass": "Box_Shadow",
							"sid": 561366915052900,
							"parameters": {
								"x": "Wall.X",
								"y": "Wall.Y"
							}
						},
						{
							"id": "move-to-layer",
							"objectClass": "Box_Shadow",
							"sid": 981124829781620,
							"parameters": {
								"layer": "\"Shadows\""
							}
						},
						{
							"id": "set-position",
							"objectClass": "Pillar_shadow",
							"sid": 671886218276762,
							"parameters": {
								"x": "pillar.X",
								"y": "pillar.Y"
							}
						},
						{
							"id": "move-to-layer",
							"objectClass": "Pillar_shadow",
							"sid": 348275000596033,
							"parameters": {
								"layer": "\"Shadows\""
							}
						},
						{
							"id": "set-mesh-point",
							"objectClass": "Pillar_shadow",
							"sid": 133661181935514,
							"parameters": {
								"col": "1",
								"row": "0",
								"mode": "relative",
								"posx": "-0.25*Pillar.ZHeight/16",
								"posy": "-0.5*Pillar.ZHeight/16",
								"z-elevation": "0",
								"texx": "0",
								"texy": "0"
							}
						},
						{
							"id": "set-mesh-point",
							"objectClass": "Pillar_shadow",
							"sid": 540971125292377,
							"parameters": {
								"col": "0",
								"row": "0",
								"mode": "relative",
								"posx": "-0.25*Pillar.ZHeight/16",
								"posy": "-0.5*Pillar.ZHeight/16",
								"z-elevation": "0",
								"texx": "0",
								"texy": "0"
							}
						},
						{
							"id": "set-mesh-point",
							"objectClass": "Pillar_shadow",
							"sid": 911699530835403,
							"parameters": {
								"col": "0",
								"row": "1",
								"mode": "relative",
								"posx": "-0.25*Pillar.ZHeight/16",
								"posy": "-0.5*Pillar.ZHeight/16",
								"z-elevation": "0",
								"texx": "0",
								"texy": "0"
							}
						}
					],
					"sid": 890349234847434,
					"children": [
						{
							"eventType": "variable",
							"name": "Seed",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 961067311420358
						},
						{
							"eventType": "comment",
							"text": "Randomize the texture and height of each wall in the layout, resulting in a more dynamic environment."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 179934250634496,
									"parameters": {
										"object": "Wall"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 728218370283237,
									"parameters": {
										"variable": "Seed",
										"value": "choose(0, 1, 2, 3)"
									}
								},
								{
									"id": "set-z-height",
									"objectClass": "Wall",
									"sid": 867372519180515,
									"parameters": {
										"z-height": "8 + random(0, 1)"
									}
								}
							],
							"sid": 754517817241894,
							"children": [
								{
									"eventType": "comment",
									"text": "First texture option."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 516948311393065,
											"parameters": {
												"variable": "Seed",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-face-object",
											"objectClass": "Wall",
											"sid": 745461017748896,
											"parameters": {
												"face": "left",
												"object": "WallTexture5"
											}
										},
										{
											"id": "set-face-object",
											"objectClass": "Wall",
											"sid": 740807560332864,
											"parameters": {
												"face": "right",
												"object": "WallTexture1"
											}
										},
										{
											"id": "set-face-object",
											"objectClass": "Wall",
											"sid": 676447217552515,
											"parameters": {
												"face": "top",
												"object": "WallTexture5"
											}
										},
										{
											"id": "set-face-object",
											"objectClass": "Wall",
											"sid": 497484879743480,
											"parameters": {
												"face": "bottom",
												"object": "WallTexture1"
											}
										},
										{
											"id": "set-face-object",
											"objectClass": "Wall",
											"sid": 450221476192644,
											"parameters": {
												"face": "front",
												"object": "RoofTexture1"
											}
										}
									],
									"sid": 223493096334032
								},
								{
									"eventType": "comment",
									"text": "Second texture option."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 923182448124350
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 231515069159603,
											"parameters": {
												"variable": "Seed",
												"comparison": 0,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-face-object",
											"objectClass": "Wall",
											"sid": 295620412222587,
											"parameters": {
												"face": "left",
												"object": "WallTexture6"
											}
										},
										{
											"id": "set-face-object",
											"objectClass": "Wall",
											"sid": 505869355001952,
											"parameters": {
												"face": "right",
												"object": "WallTexture2"
											}
										},
										{
											"id": "set-face-object",
											"objectClass": "Wall",
											"sid": 546415121681605,
											"parameters": {
												"face": "top",
												"object": "WallTexture6"
											}
										},
										{
											"id": "set-face-object",
											"objectClass": "Wall",
											"sid": 384051031871926,
											"parameters": {
												"face": "bottom",
												"object": "WallTexture2"
											}
										},
										{
											"id": "set-face-object",
											"objectClass": "Wall",
											"sid": 219149015703200,
											"parameters": {
												"face": "front",
												"object": "RoofTexture2"
											}
										}
									],
									"sid": 519776246534760
								},
								{
									"eventType": "comment",
									"text": "Third texture option."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 850687533953164
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 819268631132223,
											"parameters": {
												"variable": "Seed",
												"comparison": 0,
												"value": "2"
											}
										}
									],
									"actions": [
										{
											"id": "set-face-object",
											"objectClass": "Wall",
											"sid": 501850091600020,
											"parameters": {
												"face": "left",
												"object": "WallTexture7"
											}
										},
										{
											"id": "set-face-object",
											"objectClass": "Wall",
											"sid": 784306893826885,
											"parameters": {
												"face": "right",
												"object": "WallTexture3"
											}
										},
										{
											"id": "set-face-object",
											"objectClass": "Wall",
											"sid": 351577311516784,
											"parameters": {
												"face": "top",
												"object": "WallTexture7"
											}
										},
										{
											"id": "set-face-object",
											"objectClass": "Wall",
											"sid": 175863123987505,
											"parameters": {
												"face": "bottom",
												"object": "WallTexture3"
											}
										},
										{
											"id": "set-face-object",
											"objectClass": "Wall",
											"sid": 212101705254323,
											"parameters": {
												"face": "front",
												"object": "RoofTexture3"
											}
										}
									],
									"sid": 662952429166166
								},
								{
									"eventType": "comment",
									"text": "Fourth texture option."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 604878446845063
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 444722796414188,
											"parameters": {
												"variable": "Seed",
												"comparison": 0,
												"value": "3"
											}
										}
									],
									"actions": [
										{
											"id": "set-face-object",
											"objectClass": "Wall",
											"sid": 931167625605571,
											"parameters": {
												"face": "left",
												"object": "WallTexture8"
											}
										},
										{
											"id": "set-face-object",
											"objectClass": "Wall",
											"sid": 526589488478833,
											"parameters": {
												"face": "right",
												"object": "WallTexture4"
											}
										},
										{
											"id": "set-face-object",
											"objectClass": "Wall",
											"sid": 369285242481097,
											"parameters": {
												"face": "top",
												"object": "WallTexture8"
											}
										},
										{
											"id": "set-face-object",
											"objectClass": "Wall",
											"sid": 690005134547800,
											"parameters": {
												"face": "bottom",
												"object": "WallTexture4"
											}
										},
										{
											"id": "set-face-object",
											"objectClass": "Wall",
											"sid": 119293340412608,
											"parameters": {
												"face": "front",
												"object": "RoofTexture4"
											}
										}
									],
									"sid": 629182389442602
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Wait 7 seconds before destroying the tutorial text, giving the player enough time to read it."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 477356258915484,
									"parameters": {
										"seconds": "7"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "Text_Tutorial",
									"sid": 406434805133370,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"SelfDestroy\"",
										"property": "offsetZElevation",
										"end-value": "Self.ZElevation + 64",
										"time": "1",
										"ease": "easeinsine",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 260399980980711
						}
					]
				}
			],
			"sid": 604867780424128
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Camera",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Constantly update the camera position to follow the player."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 844073636289174
						}
					],
					"actions": [
						{
							"id": "look-at-position",
							"objectClass": "3DCamera",
							"sid": 143475938630028,
							"parameters": {
								"cam-x": "lerp(Self.CameraX, PlayerCollision.X, 0.1 * 60 * dt)",
								"cam-y": "lerp(Self.CameraY, PlayerCollision.Y + 128, 0.1 * 60 * dt)",
								"cam-z": "64",
								"look-x": "PlayerCollision.X",
								"look-y": "PlayerCollision.Y+26",
								"look-z": "8",
								"up-x": "0",
								"up-y": "0",
								"up-z": "1"
							}
						},
						{
							"id": "scroll-to-position",
							"objectClass": "System",
							"sid": 322529847434834,
							"parameters": {
								"x": "PlayerCollision.X",
								"y": "PlayerCollision.Y"
							}
						},
						{
							"type": "comment",
							"text": "Also calculate and store the player shooting angle, which is the angle between the player and the mouse cursor."
						},
						{
							"id": "set-instvar-value",
							"objectClass": "PlayerCollision",
							"sid": 624491342667670,
							"parameters": {
								"instance-variable": "ShootingAngle",
								"value": "angle(Self.X, Self.Y, Mouse.X, Mouse.Y)"
							}
						},
						{
							"type": "comment",
							"text": "At last, mirror the player based on which side of the player the mouse cursor is."
						}
					],
					"sid": 770564379398523
				}
			],
			"sid": 351058069865402
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Controls",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Move the player depending on the received input."
				},
				{
					"eventType": "comment",
					"text": "Move the player left."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 443955770422348,
							"parameters": {
								"key": 18
							}
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 859621789519933,
							"parameters": {
								"variable": "is_roll_",
								"comparison": 0,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 412099116021139,
							"parameters": {
								"variable": "is_roll_",
								"value": "1"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 597850613389528,
							"parameters": {
								"seconds": "2"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 623237867844580,
							"parameters": {
								"variable": "is_roll_",
								"value": "0"
							}
						}
					],
					"sid": 572004462420766
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 813135739966248,
							"parameters": {
								"variable": "is_roll_",
								"comparison": 0,
								"value": "1"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 404030847224565,
							"parameters": {
								"variable": "player_state",
								"value": "\"roll\""
							}
						},
						{
							"id": "set-speed",
							"objectClass": "PlayerCollision",
							"sid": 634381360198023,
							"behaviorType": "8Direction",
							"parameters": {
								"speed": "96"
							}
						}
					],
					"sid": 551279211357939,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "PlayerCollision",
									"sid": 401422849574384,
									"parameters": {
										"object": "Obstacle_3D"
									}
								},
								{
									"id": "on-collision-with-another-object",
									"objectClass": "PlayerCollision",
									"sid": 562440579774376,
									"parameters": {
										"object": "Obstacle_Box"
									}
								}
							],
							"actions": [
								{
									"id": "reverse",
									"objectClass": "PlayerCollision",
									"sid": 914382600942434,
									"behaviorType": "8Direction"
								},
								{
									"id": "set-speed",
									"objectClass": "PlayerCollision",
									"sid": 273174080054162,
									"behaviorType": "8Direction",
									"parameters": {
										"speed": "Self.8Direction.Speed/2"
									}
								}
							],
							"sid": 287992681201038,
							"isOrBlock": true
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 394235586794726,
							"parameters": {
								"variable": "is_roll_",
								"comparison": 0,
								"value": "0"
							}
						}
					],
					"actions": [],
					"sid": 509240532080856,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 106292682123991,
									"parameters": {
										"key": 16
									}
								}
							],
							"actions": [
								{
									"id": "set-max-speed",
									"objectClass": "PlayerCollision",
									"sid": 557734956259030,
									"behaviorType": "8Direction",
									"parameters": {
										"max-speed": "120"
									}
								}
							],
							"sid": 329987084059007
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 573316163391218
								}
							],
							"actions": [
								{
									"id": "set-max-speed",
									"objectClass": "PlayerCollision",
									"sid": 833379686991189,
									"behaviorType": "8Direction",
									"parameters": {
										"max-speed": "96"
									}
								}
							],
							"sid": 156193878254132
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 673722131005842,
									"parameters": {
										"key": 65
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "PlayerCollision",
									"sid": 983892425718877,
									"behaviorType": "8Direction",
									"parameters": {
										"control": "left"
									}
								}
							],
							"sid": 561588744939978
						},
						{
							"eventType": "comment",
							"text": "Move the player right."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 697614859764677,
									"parameters": {
										"key": 68
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "PlayerCollision",
									"sid": 642874630034050,
									"behaviorType": "8Direction",
									"parameters": {
										"control": "right"
									}
								}
							],
							"sid": 688612712696031
						},
						{
							"eventType": "comment",
							"text": "Move the player up."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 217094196181464,
									"parameters": {
										"key": 87
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "PlayerCollision",
									"sid": 359239658524416,
									"behaviorType": "8Direction",
									"parameters": {
										"control": "up"
									}
								}
							],
							"sid": 265224213160866
						},
						{
							"eventType": "comment",
							"text": "Move the player down."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 387466654230611,
									"parameters": {
										"key": 83
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "PlayerCollision",
									"sid": 571798098699682,
									"behaviorType": "8Direction",
									"parameters": {
										"control": "down"
									}
								}
							],
							"sid": 911686785649092
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-speed",
									"objectClass": "PlayerCollision",
									"sid": 824301755483629,
									"behaviorType": "8Direction",
									"parameters": {
										"comparison": 5,
										"speed": "100"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 949317803529756,
									"parameters": {
										"variable": "player_state",
										"value": "\"run\""
									}
								}
							],
							"sid": 525950244798673
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-speed",
									"objectClass": "PlayerCollision",
									"sid": 902022320729411,
									"behaviorType": "8Direction",
									"parameters": {
										"comparison": 5,
										"speed": "16"
									}
								},
								{
									"id": "compare-speed",
									"objectClass": "PlayerCollision",
									"sid": 895471785994407,
									"behaviorType": "8Direction",
									"parameters": {
										"comparison": 2,
										"speed": "100"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 820953492426843,
									"parameters": {
										"variable": "player_state",
										"value": "\"walk\""
									}
								}
							],
							"sid": 671375905806289
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 919413728639325
								},
								{
									"id": "compare-speed",
									"objectClass": "PlayerCollision",
									"sid": 618659629652090,
									"behaviorType": "8Direction",
									"parameters": {
										"comparison": 2,
										"speed": "16"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 569531679183976,
									"parameters": {
										"variable": "player_state",
										"value": "\"idle\""
									}
								}
							],
							"sid": 672323434157642
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-moving",
							"objectClass": "PlayerCollision",
							"sid": 385290700601595,
							"behaviorType": "8Direction"
						}
					],
					"actions": [],
					"sid": 996321951517065,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-between-values",
									"objectClass": "System",
									"sid": 262205607882052,
									"parameters": {
										"value": "PlayerCollision.8Direction.MovingAngle",
										"lower-bound": "-60",
										"upper-bound": "60"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 325528130085746,
									"parameters": {
										"variable": "player_direction",
										"value": "\"side\""
									}
								},
								{
									"id": "set-width",
									"objectClass": "PlayerBillboard",
									"sid": 291151573107998,
									"parameters": {
										"width": "32"
									}
								}
							],
							"sid": 968005170724128
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-within-angle",
									"objectClass": "System",
									"sid": 761524803878942,
									"parameters": {
										"angle-1": "PlayerCollision.8Direction.MovingAngle",
										"within": "30",
										"angle-2": "90"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 370223600300778,
									"parameters": {
										"variable": "player_direction",
										"value": "\"down\""
									}
								}
							],
							"sid": 649170660817361
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-between-values",
									"objectClass": "System",
									"sid": 618629226469614,
									"parameters": {
										"value": "PlayerCollision.8Direction.MovingAngle",
										"lower-bound": "-180",
										"upper-bound": "-120"
									}
								},
								{
									"id": "is-between-values",
									"objectClass": "System",
									"sid": 508134229746147,
									"parameters": {
										"value": "PlayerCollision.8Direction.MovingAngle",
										"lower-bound": "120",
										"upper-bound": "180"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 860408986018601,
									"parameters": {
										"variable": "player_direction",
										"value": "\"side\""
									}
								},
								{
									"id": "set-width",
									"objectClass": "PlayerBillboard",
									"sid": 850152661111673,
									"parameters": {
										"width": "-32"
									}
								}
							],
							"sid": 431727741400610,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-within-angle",
									"objectClass": "System",
									"sid": 280121041813153,
									"parameters": {
										"angle-1": "PlayerCollision.8Direction.MovingAngle",
										"within": "30",
										"angle-2": "-90"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 747040280800042,
									"parameters": {
										"variable": "player_direction",
										"value": "\"up\""
									}
								}
							],
							"sid": 781282347698571
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 412168632951023
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "PlayerTexture",
							"sid": 906171947456999,
							"parameters": {
								"animation": "\"sonic-\"&player_state&\"-\"&player_direction",
								"from": "current-frame"
							}
						}
					],
					"sid": 506738845161406
				},
				{
					"eventType": "comment",
					"text": "How many degrees a spell can deviate from its intended angle of motion."
				},
				{
					"eventType": "variable",
					"name": "SPREAD",
					"type": "number",
					"initialValue": "2",
					"comment": "",
					"isStatic": true,
					"isConstant": true,
					"sid": 612935505370908
				},
				{
					"eventType": "comment",
					"text": "While the left mouse button is down, shoot spells towards the mouse position."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "mouse-button-is-down",
							"objectClass": "Mouse",
							"sid": 515852254617090,
							"parameters": {
								"mouse-button": "left"
							}
						},
						{
							"id": "every-x-seconds",
							"objectClass": "System",
							"sid": 396673049560990,
							"parameters": {
								"interval-seconds": "0.25"
							}
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 950071779029005,
							"parameters": {
								"object-to-create": "Spell",
								"layer": "\"World\"",
								"x": "PlayerCollision.X + cos(PlayerCollision.ShootingAngle) * 14",
								"y": "PlayerCollision.Y + sin(PlayerCollision.ShootingAngle) * 8",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "Spell",
							"sid": 613046490647381,
							"parameters": {
								"z": "3"
							}
						},
						{
							"id": "set-default-color",
							"objectClass": "Spell",
							"sid": 974667772942736,
							"parameters": {
								"color": "rgbEx255(255, 208, 92)"
							}
						},
						{
							"type": "comment",
							"text": "The angle of motion may vary based on the \"SPREAD\" value."
						},
						{
							"id": "set-angle-of-motion",
							"objectClass": "Spell",
							"sid": 110383611773644,
							"behaviorType": "Bullet",
							"parameters": {
								"angle": "PlayerCollision.ShootingAngle + random(-SPREAD, SPREAD)"
							}
						}
					],
					"sid": 998664246425122
				}
			],
			"sid": 286729770969102
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Spell",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "If a bullet collides with a solid object, destroy the bullet."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Spell",
							"sid": 473376554306945,
							"parameters": {
								"object": "Wall"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Spell",
							"sid": 893823022716805
						}
					],
					"sid": 639152638668168
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Spell",
							"sid": 513725557325806,
							"parameters": {
								"object": "Pillar"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Spell",
							"sid": 125561097768267
						}
					],
					"sid": 882814539930591
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Spell",
							"sid": 828413344511825,
							"parameters": {
								"object": "Door"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Spell",
							"sid": 754608564665277
						}
					],
					"sid": 973665584678791
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Spell",
							"sid": 123278842445243,
							"parameters": {
								"object": "Crate"
							}
						}
					],
					"actions": [],
					"sid": 207649097733728,
					"children": [
						{
							"eventType": "comment",
							"text": "If the hit object is a crate, only destroy the bullet if the crate really is a solid (solid behavior). Crates above the ground level have the solid behavior set to disabled, so they can't be hit."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-enabled",
									"objectClass": "Crate",
									"sid": 146718112740962,
									"behaviorType": "Solid"
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "Spell",
									"sid": 604263496326186
								}
							],
							"sid": 111424906523068
						}
					]
				},
				{
					"eventType": "comment",
					"text": "If the hit object is a crystal, also reduce 1 from its heath."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Spell",
							"sid": 521027030078808,
							"parameters": {
								"object": "Crystal"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Spell",
							"sid": 548807921733166
						},
						{
							"id": "subtract-from-instvar",
							"objectClass": "Crystal",
							"sid": 731242759839826,
							"parameters": {
								"instance-variable": "Heath",
								"value": "1"
							}
						}
					],
					"sid": 601477988054366,
					"children": [
						{
							"eventType": "comment",
							"text": "If the crystal heath reaches 0, destroy it and create a few particles around it."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Crystal",
									"sid": 577059595407151,
									"parameters": {
										"instance-variable": "Heath",
										"comparison": 3,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "Crystal",
									"sid": 429809640871308
								},
								{
									"callFunction": "CreateParticles",
									"sid": 101475918226712,
									"parameters": [
										"Crystal.X",
										"Crystal.Y",
										"16",
										"\"254|79|210\""
									]
								},
								{
									"type": "comment",
									"text": "Also create a very long beam, like a powerful laser shooting towards the sky."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 827373800898927,
									"parameters": {
										"object-to-create": "Beam",
										"layer": "\"World\"",
										"x": "Crystal.X",
										"y": "Crystal.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-angle",
									"objectClass": "Beam",
									"sid": 654460549310765,
									"parameters": {
										"angle": "Crystal.Angle"
									}
								},
								{
									"id": "set-z-height",
									"objectClass": "Beam",
									"sid": 467260106206284,
									"parameters": {
										"z-height": "128"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "Beam",
									"sid": 763350030988097,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"SelfDestroy\"",
										"property": "size",
										"end-x": "0",
										"end-y": "0",
										"time": "0.5",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 583661386004796,
							"children": [
								{
									"eventType": "comment",
									"text": "After a crystal is destroyed, count how many are left on the layout and open the doors that require an equal or lower amount of crystals."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 928741496855018,
											"parameters": {
												"object": "Door"
											}
										}
									],
									"actions": [],
									"sid": 299082335712869,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 395327034364775,
													"parameters": {
														"first-value": "Crystal.Count - 1",
														"comparison": 3,
														"second-value": "Door.MaxCrystals"
													}
												}
											],
											"actions": [
												{
													"id": "tween-one-property",
													"objectClass": "Door",
													"sid": 333920549843269,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"SelfDestroy\"",
														"property": "offsetZElevation",
														"end-value": "-Self.ZHeight",
														"time": "0.5",
														"ease": "easeinsine",
														"destroy-on-complete": "yes",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 375973657609216
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Once a spell is destroyed, leave a single particle on its position."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-destroyed",
							"objectClass": "Spell",
							"sid": 996672601248600
						}
					],
					"actions": [
						{
							"callFunction": "CreateParticles",
							"sid": 244759205963815,
							"parameters": [
								"Spell.X",
								"Spell.Y",
								"1",
								"\"255|208|92\""
							]
						}
					],
					"sid": 464118270022256
				},
				{
					"eventType": "comment",
					"text": "While a spell is moving in the air, leave a trail of particles behind it."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 568527186430510,
							"parameters": {
								"first-value": "Spell.Count",
								"comparison": 4,
								"second-value": "0"
							}
						},
						{
							"id": "every-x-seconds",
							"objectClass": "System",
							"sid": 505810226809052,
							"parameters": {
								"interval-seconds": "0.025"
							}
						}
					],
					"actions": [],
					"sid": 182359719388066,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 462950125679349,
									"parameters": {
										"object": "Spell"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 782374408141138,
									"parameters": {
										"object-to-create": "Particle",
										"layer": "\"World\"",
										"x": "Spell.X",
										"y": "Spell.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-z-elevation",
									"objectClass": "Particle",
									"sid": 444619125833676,
									"parameters": {
										"z": "Spell.ZElevation"
									}
								},
								{
									"id": "set-default-color",
									"objectClass": "Particle",
									"sid": 183968251160772,
									"parameters": {
										"color": "rgbEx255(255, 208, 92)"
									}
								},
								{
									"id": "set-size",
									"objectClass": "Particle",
									"sid": 416296916849274,
									"parameters": {
										"width": "Spell.Width - 1 / 100000",
										"height": "Spell.Height - 1 / 100000"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "Particle",
									"sid": 496971576530426,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"SelfDestroy\"",
										"property": "size",
										"end-x": "0",
										"end-y": "0",
										"time": "0.1",
										"ease": "default",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 389889412578533
						}
					]
				}
			],
			"sid": 468173467440086
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Particles",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Create a specific amount of particles in any X/Y position."
				},
				{
					"functionName": "CreateParticles",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "PositionX",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 168394791448573
						},
						{
							"name": "PositionY",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 975036209883322
						},
						{
							"name": "Quantity",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 746423810558632
						},
						{
							"name": "Color",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 747357941935031
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 765564415030387,
					"children": [
						{
							"eventType": "comment",
							"text": "How far the particle will move from its origin point."
						},
						{
							"eventType": "variable",
							"name": "DistanceBuffer",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 402621103069332
						},
						{
							"eventType": "comment",
							"text": "The direction the particle will move towards."
						},
						{
							"eventType": "variable",
							"name": "AngleBuffer",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 595608111331037
						},
						{
							"eventType": "comment",
							"text": "How long it will take for the particle to reach its destination."
						},
						{
							"eventType": "variable",
							"name": "TimeBuffer",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 175216735578141
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 267790477183144,
									"parameters": {
										"count": "Quantity"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 495185095035286,
									"parameters": {
										"object-to-create": "Particle",
										"layer": "\"World\"",
										"x": "PositionX",
										"y": "PositionY",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-z-elevation",
									"objectClass": "Particle",
									"sid": 752028928767034,
									"parameters": {
										"z": "Spell.ZElevation"
									}
								},
								{
									"id": "set-default-color",
									"objectClass": "Particle",
									"sid": 168035544061393,
									"parameters": {
										"color": "rgbEx255(\nint(tokenat(Color, 0, \"|\")),\nint(tokenat(Color, 1, \"|\")),\nint(tokenat(Color, 2, \"|\"))\n)"
									}
								},
								{
									"type": "comment",
									"text": "Randomize and apply multiple parameters to each particle, resulting in a more dynamic effect."
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 835019443059622,
									"parameters": {
										"variable": "DistanceBuffer",
										"value": "random(8, 32)"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 866543513662387,
									"parameters": {
										"variable": "AngleBuffer",
										"value": "random(0, 360)"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 651985956529660,
									"parameters": {
										"variable": "TimeBuffer",
										"value": "random(0.5, 1)"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "Particle",
									"sid": 233889398418181,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Position\"",
										"property": "position",
										"end-x": "Self.X + cos(AngleBuffer) * DistanceBuffer",
										"end-y": "Self.Y + sin(AngleBuffer) * DistanceBuffer",
										"time": "TimeBuffer",
										"ease": "default",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "Particle",
									"sid": 492200493888164,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ZElevation\"",
										"property": "offsetZElevation",
										"end-value": "Self.ZElevation + random(4, 8)",
										"time": "TimeBuffer / 2",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "Particle",
									"sid": 854703131665575,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Size\"",
										"property": "size",
										"end-x": "0",
										"end-y": "0",
										"time": "TimeBuffer",
										"ease": "default",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 915483662565019
						}
					]
				}
			],
			"sid": 413573812370636
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "SlimeAI",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "How long it takes for a monster to jump from point to point."
				},
				{
					"eventType": "variable",
					"name": "JUMPTIME",
					"type": "number",
					"initialValue": "0.5",
					"comment": "",
					"isStatic": true,
					"isConstant": true,
					"sid": 800539923351010
				},
				{
					"eventType": "comment",
					"text": "How long the monster need to rest before performing another jump."
				},
				{
					"eventType": "variable",
					"name": "COOLDOWN",
					"type": "number",
					"initialValue": "0.5",
					"comment": "",
					"isStatic": true,
					"isConstant": true,
					"sid": 354696760186764
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 448758198103548
						}
					],
					"actions": [],
					"sid": 349105924418942,
					"children": [
						{
							"eventType": "comment",
							"text": "The distance between the monster and the player."
						},
						{
							"eventType": "variable",
							"name": "DistanceBuffer",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 596752082318195
						},
						{
							"eventType": "comment",
							"text": "The angle between the monster and the player."
						},
						{
							"eventType": "variable",
							"name": "AngleBuffer",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 885096203231796
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 820165781156868,
									"parameters": {
										"object": "Monster"
									}
								}
							],
							"actions": [],
							"sid": 788784793354274,
							"children": [
								{
									"eventType": "comment",
									"text": "If the monster has line of sight to the player, make it jump towards the player. But only if the monster is ready to perform a jump."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "has-los-to-object",
											"objectClass": "Monster",
											"sid": 848582518770791,
											"behaviorType": "LineOfSight",
											"parameters": {
												"object": "PlayerCollision",
												"image-point": "0"
											}
										}
									],
									"actions": [],
									"sid": 434235856180054,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "Monster",
													"sid": 622998892007604,
													"parameters": {
														"instance-variable": "ReadyToJump"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "Prevent the monster from jumping again."
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "Monster",
													"sid": 256742631203692,
													"parameters": {
														"instance-variable": "ReadyToJump",
														"value": "false"
													}
												},
												{
													"type": "comment",
													"text": "Calculate the angle and distance towards the player."
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 821225046999769,
													"parameters": {
														"variable": "DistanceBuffer",
														"value": "clamp(distance(Monster.X, Monster.Y, PlayerCollision.X, PlayerCollision.Y), 0, 64)"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 967108862158362,
													"parameters": {
														"variable": "AngleBuffer",
														"value": "angle(Monster.X, Monster.Y, PlayerCollision.X, PlayerCollision.Y)"
													}
												},
												{
													"type": "comment",
													"text": "Move the monster using the previously stored values."
												},
												{
													"id": "tween-two-properties",
													"objectClass": "Monster",
													"sid": 194710446716939,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"JumpPosition\"",
														"property": "position",
														"end-x": "Self.X + cos(AngleBuffer) * DistanceBuffer",
														"end-y": "Self.Y + sin(AngleBuffer) * DistanceBuffer",
														"time": "JUMPTIME",
														"ease": "default",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												},
												{
													"id": "tween-one-property",
													"objectClass": "Monster",
													"sid": 894950830960099,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"JumpZElevation\"",
														"property": "offsetZElevation",
														"end-value": "16",
														"time": "JUMPTIME / 2",
														"ease": "easeoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "yes",
														"repeat-count": "1"
													}
												},
												{
													"type": "comment",
													"text": "Start a cooldown timer, so the monster need to wait a bit before performing another jump."
												},
												{
													"id": "tween-value",
													"objectClass": "Monster",
													"sid": 701584841969906,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"Cooldown\"",
														"start-value": "0",
														"end-value": "1",
														"time": "JUMPTIME + COOLDOWN",
														"ease": "default",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												},
												{
													"type": "comment",
													"text": "Reduce the monster size, so the jump looks more intense."
												},
												{
													"id": "tween-two-properties",
													"objectClass": "Monster",
													"sid": 637603891587343,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"ReduceSize\"",
														"property": "size",
														"end-x": "8",
														"end-y": "8",
														"time": "JUMPTIME / 2",
														"ease": "easeoutback",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												},
												{
													"type": "comment",
													"text": "Leave a few green particles behind the monster."
												},
												{
													"callFunction": "CreateParticles",
													"sid": 917251149975709,
													"parameters": [
														"Monster.X",
														"Monster.Y",
														"8",
														"\"159|191|78\""
													]
												}
											],
											"sid": 916424087535483
										}
									]
								},
								{
									"eventType": "comment",
									"text": "If the monster isn't jumping and is too close to the player, it's game over."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-playing",
											"objectClass": "Monster",
											"sid": 580330986321774,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"JumpPosition\""
											},
											"isInverted": true
										}
									],
									"actions": [],
									"sid": 311428407495310,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 311687466863795,
													"parameters": {
														"first-value": "distance(Monster.X, Monster.Y, PlayerCollision.X, PlayerCollision.Y)",
														"comparison": 3,
														"second-value": "8"
													}
												}
											],
											"actions": [
												{
													"id": "restart-layout",
													"objectClass": "System",
													"sid": 851676658918425
												}
											],
											"sid": 473085681604848
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Once the jump is over, reset the monster size."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tweens-finished",
							"objectClass": "Monster",
							"sid": 724974619053490,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"JumpPosition\""
							}
						}
					],
					"actions": [
						{
							"id": "tween-two-properties",
							"objectClass": "Monster",
							"sid": 691728897730813,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ResetSize\"",
								"property": "size",
								"end-x": "16",
								"end-y": "16",
								"time": "JUMPTIME / 2",
								"ease": "easeoutback",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 591751065048010
				},
				{
					"eventType": "comment",
					"text": "Once the cooldown is also over, allow the monster to jump again."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tweens-finished",
							"objectClass": "Monster",
							"sid": 179299802148304,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Cooldown\""
							}
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "Monster",
							"sid": 550487205565656,
							"parameters": {
								"instance-variable": "ReadyToJump",
								"value": "true"
							}
						}
					],
					"sid": 936380224843975
				},
				{
					"eventType": "comment",
					"text": "If a spell collides with a monster, change the spell angle of motion slightly to simulate a ricochet effect."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Spell",
							"sid": 249214107052199,
							"parameters": {
								"object": "Monster"
							}
						}
					],
					"actions": [
						{
							"id": "set-angle-of-motion",
							"objectClass": "Spell",
							"sid": 365571290449490,
							"behaviorType": "Bullet",
							"parameters": {
								"angle": "Self.Bullet.AngleOfMotion + random(-45, 45)"
							}
						}
					],
					"sid": 141988188812460
				}
			],
			"sid": 359843730572304
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "GameOver",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Once the player collides with the trigger, destroy the trigger itself and all monsters in the layout."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "PlayerCollision",
							"sid": 241707149157615,
							"parameters": {
								"object": "Trigger"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Trigger",
							"sid": 469198362322980
						}
					],
					"sid": 212993450014177,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 429615550010399,
									"parameters": {
										"object": "Monster"
									}
								}
							],
							"actions": [
								{
									"callFunction": "CreateParticles",
									"sid": 325168136831587,
									"parameters": [
										"Monster.X",
										"Monster.Y",
										"16",
										"\"159|191|78\""
									]
								},
								{
									"id": "destroy",
									"objectClass": "Monster",
									"sid": 886450192055504
								}
							],
							"sid": 620400850946418
						},
						{
							"eventType": "comment",
							"text": "Also restart the layout after 3 seconds."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 100739554004045,
									"parameters": {
										"seconds": "3"
									}
								},
								{
									"id": "restart-layout",
									"objectClass": "System",
									"sid": 267389050156615
								}
							],
							"sid": 404157635407017
						}
					]
				}
			],
			"sid": 336341106785878
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "every-tick",
					"objectClass": "System",
					"sid": 249709861136590
				}
			],
			"actions": [
				{
					"id": "set-width",
					"objectClass": "Player_shadow",
					"sid": 553933050500555,
					"parameters": {
						"width": "PlayerBillboard.Width"
					}
				},
				{
					"id": "set-position-to-another-object",
					"objectClass": "Grass_Texture",
					"sid": 770178781776248,
					"parameters": {
						"object": "PlayerCollision",
						"image-point-optional": "0"
					}
				},
				{
					"id": "set-image-offset-x",
					"objectClass": "Grass_Texture",
					"sid": 247899198652687,
					"parameters": {
						"offset-x": "-PlayerCollision.x"
					}
				},
				{
					"id": "set-image-offset-y",
					"objectClass": "Grass_Texture",
					"sid": 514817505336878,
					"parameters": {
						"offset-y": "-PlayerCollision.y"
					}
				},
				{
					"id": "set-position-to-another-object",
					"objectClass": "Grass_Color",
					"sid": 668610420313877,
					"parameters": {
						"object": "PlayerCollision",
						"image-point-optional": "0"
					}
				},
				{
					"id": "set-image-offset-x",
					"objectClass": "Grass_Color",
					"sid": 243435121192104,
					"parameters": {
						"offset-x": "-PlayerCollision.x/10"
					}
				},
				{
					"id": "set-image-offset-y",
					"objectClass": "Grass_Color",
					"sid": 924626319313721,
					"parameters": {
						"offset-y": "-PlayerCollision.y/10"
					}
				}
			],
			"sid": 809644238183500
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 472762846141831
				}
			],
			"actions": [],
			"sid": 679877151336416,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each-element",
							"objectClass": "Array_World",
							"sid": 669833036696325,
							"parameters": {
								"axes": "xy"
							}
						}
					],
					"actions": [
						{
							"id": "set-at-xyz",
							"objectClass": "Array_World",
							"sid": 558675596384380,
							"parameters": {
								"x": "Array_World.curx",
								"y": "Array_World.cury",
								"z": "0",
								"value": "AdvancedRandom.Voronoi2d(Array_World.curx, Array_World.cury)"
							}
						}
					],
					"sid": 853983714249122
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each-element",
							"objectClass": "Array_World",
							"sid": 925530832387873,
							"parameters": {
								"axes": "xy"
							}
						},
						{
							"id": "compare-at-xy",
							"objectClass": "Array_World",
							"sid": 132175328700948,
							"parameters": {
								"x": "Array_World.CurX",
								"y": "Array_World.Cury",
								"comparison": 4,
								"value": "0.5"
							}
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 718821594750286,
							"parameters": {
								"object-to-create": "Wall",
								"layer": "\"world\"",
								"x": "Array_World.CurX*16",
								"y": "Array_World.Cury*16",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						}
					],
					"sid": 880725300956202,
					"disabled": true
				}
			]
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "WorldRenderer",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "world_render_update_x",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 125187060700616
				},
				{
					"eventType": "variable",
					"name": "world_render_update_y",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 204940361610055
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 645601422324968,
							"parameters": {
								"first-value": "int(PlayerCollision.X/16)*16",
								"comparison": 1,
								"second-value": "world_render_update_x"
							}
						}
					],
					"actions": [
						{
							"id": "set-x",
							"objectClass": "Chunk",
							"sid": 711540448517092,
							"parameters": {
								"x": "int(PlayerCollision.X/16)*16"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 731352797683494,
							"parameters": {
								"variable": "world_render_update_x",
								"value": "int(PlayerCollision.X/16)*16"
							}
						}
					],
					"sid": 851335905946488
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 838997772764097,
							"parameters": {
								"first-value": "int(PlayerCollision.y/16)*16",
								"comparison": 1,
								"second-value": "world_render_update_y"
							}
						}
					],
					"actions": [
						{
							"id": "set-y",
							"objectClass": "Chunk",
							"sid": 720980163526504,
							"parameters": {
								"y": "int(PlayerCollision.Y/16)*16+32"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 405205637853485,
							"parameters": {
								"variable": "world_render_update_y",
								"value": "int(PlayerCollision.y/16)*16"
							}
						}
					],
					"sid": 355814923175852
				}
			],
			"sid": 912129118787494
		},
		{
			"eventType": "variable",
			"name": "Player_color_red",
			"type": "number",
			"initialValue": "255",
			"comment": "0...255",
			"isStatic": false,
			"isConstant": false,
			"sid": 586869801849339
		},
		{
			"eventType": "variable",
			"name": "Player_color_green",
			"type": "number",
			"initialValue": "255",
			"comment": "0...255",
			"isStatic": false,
			"isConstant": false,
			"sid": 255524589731635
		},
		{
			"eventType": "variable",
			"name": "Player_color_blue",
			"type": "number",
			"initialValue": "255",
			"comment": "0...255",
			"isStatic": false,
			"isConstant": false,
			"sid": 542290482943690
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "UI",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "PlayerCollision",
							"sid": 878055804929416,
							"parameters": {
								"object": "Pillar_shadow"
							}
						}
					],
					"actions": [
						{
							"id": "set-effect-enabled",
							"objectClass": "PlayerBillboard",
							"sid": 951964237701539,
							"parameters": {
								"mode": "disable",
								"effect": "\"RimLight\""
							}
						},
						{
							"id": "set-default-color",
							"objectClass": "PlayerBillboard",
							"sid": 709412551900696,
							"parameters": {
								"color": "rgbEx(40, 60, 80)"
							}
						}
					],
					"sid": 861615036827207
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "PlayerCollision",
							"sid": 622846498501694,
							"parameters": {
								"object": "Pillar_shadow"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-effect-enabled",
							"objectClass": "PlayerBillboard",
							"sid": 922065886316182,
							"parameters": {
								"mode": "enable",
								"effect": "\"RimLight\""
							}
						},
						{
							"id": "set-default-color",
							"objectClass": "PlayerBillboard",
							"sid": 439647556869606,
							"parameters": {
								"color": "rgbEx(100, 100, 100)"
							}
						}
					],
					"sid": 303179012988836
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 876011671757280
						}
					],
					"actions": [
						{
							"id": "add-child",
							"objectClass": "SliderBar",
							"sid": 869680038101337,
							"parameters": {
								"child": "SliderHead",
								"transform-x": true,
								"transform-y": true,
								"transform-w": false,
								"transform-h": false,
								"transform-a": true,
								"transform-o": true,
								"transform-z-elevation": true,
								"transform-visibility": true,
								"destroy-with-parent": true
							}
						},
						{
							"id": "set-position",
							"objectClass": "SliderHead",
							"sid": 229325733821591,
							"parameters": {
								"x": "SliderBar.x+Player_color_red/255*SliderBar.Width",
								"y": "SliderBar.y"
							}
						},
						{
							"id": "move-to-object",
							"objectClass": "SliderHead",
							"sid": 887482599580501,
							"parameters": {
								"where": "in-front",
								"object": "SliderBar"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "PlayerBillboard",
							"sid": 439909943263664,
							"parameters": {
								"effect": "\"ReplaceColorLight\"",
								"parameter-index": "1",
								"value": "rgb(Player_color_red,Player_color_green,Player_color_blue)"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "PlayerBillboard",
							"sid": 663123190128625,
							"parameters": {
								"effect": "\"ReplaceColorMid\"",
								"parameter-index": "1",
								"value": "rgb(int(Player_color_red*0.7),int(Player_color_green*0.7),int(Player_color_blue*0.7))"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "PlayerBillboard",
							"sid": 438484939674686,
							"parameters": {
								"effect": "\"ReplaceColorDark\"",
								"parameter-index": "1",
								"value": "rgb(int(Player_color_red*0.4),int(Player_color_green*0.4),int(Player_color_blue*0.4))"
							}
						}
					],
					"sid": 932378890876694,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "SliderBar",
									"sid": 222201874866469,
									"parameters": {
										"instance-variable": "color",
										"comparison": 0,
										"value": "\"red\""
									}
								}
							],
							"actions": [
								{
									"id": "set-animation-frame",
									"objectClass": "SliderHead",
									"sid": 327421425758175,
									"parameters": {
										"frame-number": "0"
									}
								}
							],
							"sid": 940249679722044
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "SliderBar",
									"sid": 137688896975267,
									"parameters": {
										"instance-variable": "color",
										"comparison": 0,
										"value": "\"green\""
									}
								}
							],
							"actions": [
								{
									"id": "set-animation-frame",
									"objectClass": "SliderHead",
									"sid": 835515280004038,
									"parameters": {
										"frame-number": "1"
									}
								}
							],
							"sid": 386571440430908
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "SliderBar",
									"sid": 552150433848107,
									"parameters": {
										"instance-variable": "color",
										"comparison": 0,
										"value": "\"blue\""
									}
								}
							],
							"actions": [
								{
									"id": "set-animation-frame",
									"objectClass": "SliderHead",
									"sid": 814379685033461,
									"parameters": {
										"frame-number": "2"
									}
								}
							],
							"sid": 846888539362160
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-dragging",
							"objectClass": "SliderHead",
							"sid": 671356147913321,
							"behaviorType": "DragDrop"
						},
						{
							"id": "on-drop",
							"objectClass": "SliderHead",
							"sid": 522893217433258,
							"behaviorType": "DragDrop"
						}
					],
					"actions": [
						{
							"id": "set-effect-parameter",
							"objectClass": "PlayerBillboard",
							"sid": 342507226703769,
							"parameters": {
								"effect": "\"ReplaceColorLight\"",
								"parameter-index": "1",
								"value": "rgb(Player_color_red,Player_color_green,Player_color_blue)"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "PlayerBillboard",
							"sid": 201494352459635,
							"parameters": {
								"effect": "\"ReplaceColorMid\"",
								"parameter-index": "1",
								"value": "rgb(int(Player_color_red*0.7),int(Player_color_green*0.7),int(Player_color_blue*0.7))"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "PlayerBillboard",
							"sid": 510664385597035,
							"parameters": {
								"effect": "\"ReplaceColorDark\"",
								"parameter-index": "1",
								"value": "rgb(int(Player_color_red*0.4),int(Player_color_green*0.4),int(Player_color_blue*0.4))"
							}
						},
						{
							"id": "set-text",
							"objectClass": "Text_Debug",
							"sid": 967486849637055,
							"parameters": {
								"text": "Player_color_red&\", \"&Player_color_green&\", \"&Player_color_blue"
							}
						}
					],
					"sid": 747077154560437,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-x",
									"objectClass": "SliderHead",
									"sid": 887126312043234,
									"parameters": {
										"comparison": 5,
										"x-co-ordinate": "SliderBar.X+SliderBar.width"
									}
								}
							],
							"actions": [
								{
									"id": "set-x",
									"objectClass": "SliderHead",
									"sid": 465036050262917,
									"parameters": {
										"x": "SliderBar.X+SliderBar.width"
									}
								}
							],
							"sid": 856922527362767
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-x",
									"objectClass": "SliderHead",
									"sid": 646427292104113,
									"parameters": {
										"comparison": 3,
										"x-co-ordinate": "SliderBar.X"
									}
								}
							],
							"actions": [
								{
									"id": "set-x",
									"objectClass": "SliderHead",
									"sid": 364444289460366,
									"parameters": {
										"x": "SliderBar.X"
									}
								}
							],
							"sid": 788809164847174
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "SliderBar",
									"sid": 561681112013008,
									"parameters": {
										"instance-variable": "color",
										"comparison": 0,
										"value": "\"red\""
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 181097924680292,
									"parameters": {
										"variable": "Player_color_red",
										"value": "rgb(int((SliderHead.x-SliderBar.X)/SliderBar.Width*255),0,0)"
									}
								}
							],
							"sid": 112601609962604
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "SliderBar",
									"sid": 318155649270748,
									"parameters": {
										"instance-variable": "color",
										"comparison": 0,
										"value": "\"green\""
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 662780763891562,
									"parameters": {
										"variable": "Player_color_green",
										"value": "rgb(int((SliderHead.x-SliderBar.X)/SliderBar.Width*255),0,0)"
									}
								}
							],
							"sid": 482269444356975
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "SliderBar",
									"sid": 115147906461411,
									"parameters": {
										"instance-variable": "color",
										"comparison": 0,
										"value": "\"blue\""
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 787178818839524,
									"parameters": {
										"variable": "Player_color_blue",
										"value": "rgb(int((SliderHead.x-SliderBar.X)/SliderBar.Width*255),0,0)"
									}
								}
							],
							"sid": 605673958881846
						}
					],
					"isOrBlock": true
				}
			],
			"sid": 994824942128361
		}
	],
	"sid": 279236097198855
}